databaseChangeLog:
- changeSet:
    id: 1.0.0
    author: vmalibu
    changes:
      - createTable:
          tableName: maths_road_map_article
          remarks: Articles
          columns:
            - column:
                name: id
                type: bigint
                autoIncrement: true
                constraints:
                  primaryKey: true
                  primaryKeyName: pk_article
                  nullable: false
            - column:
                name: version
                type: smallint
                constraints:
                  nullable: false
            - column:
                name: abstraction_level
                type: smallint
                constraints:
                  nullable: false
            - column:
                name: title
                type: varchar(50)
                constraints:
                  nullable: false

      - createTable:
          tableName: maths_road_map_article_latex
          remarks: Article latex data
          columns:
            - column:
                name: id
                type: bigint
                autoIncrement: true
                constraints:
                  primaryKey: true
                  primaryKeyName: pk_article_latex
                  nullable: false
            - column:
                name: version
                type: smallint
                constraints:
                  nullable: false
            - column:
                name: latex
                type: text
                constraints:
                  nullable: false
            - column:
                name: configuration
                type: text
                constraints:
                  nullable: true

      - createTable:
          tableName: maths_road_map_article_tree
          remarks: Linking table for tree
          columns:
            - column:
                name: fk_prev
                type: bigint
                constraints:
                  nullable: false
            - column:
                name: fk_next
                type: bigint
                constraints:
                  nullable: false

      - addPrimaryKey:
          tableName: maths_road_map_article_tree
          columnNames: fk_prev, fk_next
          constraintName: article_tree_edge

      - addForeignKeyConstraint:
          baseTableName: maths_road_map_article_latex
          baseColumnNames: id
          referencedTableName: maths_road_map_article
          referencedColumnNames: id
          constraintName: fk_article_latex_to_article

      - addForeignKeyConstraint:
          baseTableName: maths_road_map_article_tree
          baseColumnNames: fk_prev
          referencedTableName: maths_road_map_article
          referencedColumnNames: id
          constraintName: fk_prev_to_article

      - addForeignKeyConstraint:
          baseTableName: maths_road_map_article_tree
          baseColumnNames: fk_next
          referencedTableName: maths_road_map_article
          referencedColumnNames: id
          constraintName: fk_next_to_article